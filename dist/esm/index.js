import{Center as e,VStack as n,Text as t,Divider as r,Box as l,Button as a,ChakraProvider as o}from"@chakra-ui/react";import i,{useState as c,useRef as u}from"react";var s=function(o){var s,m=o.email,d=o.logout,f=o.sendEmail,v=function(){var e=c(0),n=e[0],t=e[1],r=u();return{seconds:n,startCountDown:function(e){r.current||(t(e),r.current=setInterval((function(){t((function(e){return e<0?(clearInterval(r.current),r.current=void 0,0):e-1}))}),1e3))}}}(),E=v.seconds,g=v.startCountDown,h=function(e){var n=c({loading:!1,called:!1}),t=n[0],r=n[1];return[t,function(){return r({loading:!0,called:!0}),e().then((function(e){return r({loading:!1,called:!0}),e})).catch((function(e){console.error(e),r({loading:!1,called:!0,error:e})}))}]}(f),p=h[0],w=p.error,y=p.loading,b=p.called,k=h[1],x=429===(null===(s=null==w?void 0:w.response)||void 0===s?void 0:s.status),C=x?"You've sent to many requests, please try again later.":"An error occurred, please try again.";return i.createElement(e,{h:"90vh",m:"auto"},i.createElement(n,{align:"center",w:"40vw",textAlign:"center",spacing:8},i.createElement(t,{fontSize:"2xl"},"Almost there â€¦"),i.createElement(t,null,"Please check your email ",i.createElement("b",null,m)," to confirm your account."),i.createElement(r,null),i.createElement(t,null,"If ",i.createElement("b",null,m)," is not your email address, please"," ",i.createElement(l,{display:"contents",textDecoration:"underline",color:"blue",cursor:"pointer",onClick:function(){return d()}},"click here to go back")," ","and enter the correct one."," "),i.createElement(t,null,"If you have not received our email in 15 minutes, please check your spam folder."),i.createElement(n,null,i.createElement(t,null,"Still can't find it?"),!x&&i.createElement(a,{onClick:function(){return k().then((function(e){var n;g(30),(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.url)&&(window.location.href=e.data.url)}))},variant:"invertedPrimary",w:"fit-content",px:"6",size:"sm",ml:"3",disabled:y||E>0},y?"Loading...":"Resend verification email"),!y&&b&&i.createElement(t,{color:w?"warning.600":"secondary.500"},w?C:"Your verification email has been sent, please check your inbox."),E>0&&i.createElement(t,{fontSize:"xs"},"You can try again in ",E))))},m=function(){return i.createElement(o,null,i.createElement(e,{h:"100vh"},i.createElement(n,{textAlign:"center",spacing:"6"},i.createElement(t,null,"Your email has been verified ðŸŽ‰"),i.createElement(a,{onClick:function(){return window.location.assign("/admin")}},"Continue to UseCSV"))))},d=function(e){var n=e.children,t=e.logout,r=e.sendVerifyEmail,l=new URLSearchParams(window.location.search).get("error_description"),a="string"==typeof l&&window.atob(l),o=a?JSON.parse(a):{},c=o.email,u=o.userId;return"email_not_verified"!==o.errorCode?i.createElement(i.Fragment,null,n):i.createElement(s,{sendEmail:function(){return r(u)},logout:t,email:c})};export{d as CheckEmailVerification,m as EmailVerifiedNextPage,s as VerifyYourAccount};
//# sourceMappingURL=index.js.map
